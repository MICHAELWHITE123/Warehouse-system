# Инструкции по отладке функции быстрой отметки погрузки

## Проблема
Функция отметки техники как погруженной не работает. Нужно выяснить, на каком этапе происходит сбой.

## Что добавлено для отладки

### 1. Тестовые кнопки
- **Тест** - проверяет, что компонент вообще работает
- **Состояние** - показывает текущее состояние компонента

### 2. Отладочная информация в консоли
При загрузке компонента в консоли браузера должно появиться:
```
=== InventoryOverview Debug ===
equipment: [...]
equipment.length: X
compactMode: true/false
onEquipmentStatusChange: true/false
Первая единица техники: {...}
Доступная техника: [...]
=============================
```

### 3. Отладочная информация при клике
При нажатии на кнопку-галочку в консоли должно появиться:
```
=== handleMarkAsLoaded Debug ===
Вызван для техники: {...}
ID техники: X
UUID техники: X
Статус техники: available
Текущее состояние loadingEquipment: []
Новое состояние loadingEquipment: [X]
Начинаем обработку погрузки для техники: X
Проверяем базу данных...
Вызываем onEquipmentStatusChange с параметрами: X, in-use
Обработка завершена успешно
Снимаем состояние загрузки для техники: X
Финальное состояние loadingEquipment: []
=== Конец handleMarkAsLoaded ===
```

## Пошаговая отладка

### Шаг 1: Проверка загрузки компонента
1. Откройте форму создания отгрузки
2. Откройте консоль браузера (F12)
3. Проверьте, появились ли отладочные сообщения
4. Если нет - проблема в загрузке компонента

### Шаг 2: Проверка данных
1. В консоли найдите сообщение "equipment: [...]"
2. Проверьте, есть ли данные
3. Проверьте, есть ли техника со статусом "available"
4. Если нет - проблема в данных

### Шаг 3: Проверка тестовых кнопок
1. Нажмите кнопку "Тест"
2. Должно появиться уведомление "Тестовая кнопка работает!"
3. Если нет - проблема в базовой функциональности

### Шаг 4: Проверка кнопок-галочек
1. Найдите технику со статусом "Доступно"
2. Нажмите на зеленую галочку
3. Проверьте консоль на наличие отладочных сообщений
4. Должно появиться уведомление об успешной отметке

### Шаг 5: Проверка состояния
1. Нажмите кнопку "Состояние"
2. В консоли должно появиться текущее состояние компонента
3. Проверьте, что `loadingEquipment` работает правильно

## Возможные проблемы и решения

### Проблема 1: Компонент не загружается
**Симптомы:** Нет отладочных сообщений в консоли
**Решение:** Проверить импорты и использование компонента

### Проблема 2: Нет данных
**Симптомы:** `equipment.length: 0` или `equipment: []`
**Решение:** Проверить загрузку данных в `App.tsx`

### Проблема 3: Нет доступной техники
**Симптомы:** `Доступная техника: []`
**Решение:** Проверить статусы техники в данных

### Проблема 4: Кнопки не реагируют
**Симптомы:** Нет сообщений при клике
**Решение:** Проверить обработчики событий

### Проблема 5: Ошибки в консоли
**Симптомы:** Красные сообщения об ошибках
**Решение:** Исправить ошибки JavaScript

## Проверка в разных режимах

### Компактный режим
- Откройте форму отгрузки
- В левой панели должен быть виджет "Остатки на складе"
- Должна быть тестовая панель с желтым фоном
- Должны быть кнопки-галочки для доступной техники

### Полный режим
- Нажмите "Подробнее" в компактном режиме
- Должно открыться модальное окно
- В верхней части должна быть тестовая панель
- В списке техники должны быть кнопки-галочки

## Логи для отправки разработчику

Если проблема не решается, отправьте в консоли браузера:
1. Все отладочные сообщения
2. Ошибки (красные сообщения)
3. Состояние компонента (кнопка "Состояние")
4. Скриншот интерфейса

## Восстановление функциональности

После отладки и исправления проблем:
1. Удалите тестовые кнопки
2. Уберите отладочные console.log
3. Восстановите полную функциональность с базой данных
4. Протестируйте создание отгрузок
